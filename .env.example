# ============================================================================
# DATABASE CONFIGURATION (Supabase PostgreSQL)
# ============================================================================
# Use the connection pooler for serverless environments (Vercel, etc.)
# The password should be URL-encoded if it contains special characters
# Example: @ becomes %40, # becomes %23, etc.

# Connection pooler for Prisma Client (use in production)
DATABASE_URL="postgresql://postgres.[PROJECT-REF]:[URL_ENCODED_PASSWORD]@aws-1-us-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true"

# Direct connection for Prisma Migrations (bypasses connection pooler)
DIRECT_URL="postgresql://postgres.[PROJECT-REF]:[URL_ENCODED_PASSWORD]@aws-1-us-east-1.pooler.supabase.com:5432/postgres"

# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================
# Get these from: Supabase Dashboard → Project Settings → API

# Public URL for your Supabase project
NEXT_PUBLIC_SUPABASE_URL="https://[PROJECT-REF].supabase.co"

# Anonymous key (safe to use in client-side code)
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGc..."

# Service role key (server-side only, has full database access)
# ⚠️ NEVER expose this in client-side code
SUPABASE_SERVICE_ROLE_KEY="eyJhbGc..."

# ============================================================================
# STRIPE CONFIGURATION
# ============================================================================
# Get these from: Stripe Dashboard → Developers → API Keys

# Publishable key (safe to use in client-side code)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_..." # Use pk_live_... for production

# Secret key (server-side only)
# ⚠️ NEVER expose this in client-side code
STRIPE_SECRET_KEY="sk_test_..." # Use sk_live_... for production

# Webhook signing secret (for verifying webhook events)
# Get from: Stripe Dashboard → Developers → Webhooks
# After creating webhook endpoint: https://your-domain.com/api/webhooks/stripe
STRIPE_WEBHOOK_SECRET="whsec_..."

# ============================================================================
# STRIPE PRICING CONFIGURATION - HYBRID MODEL (UPDATED)
# ============================================================================
# Create these prices in: Stripe Dashboard → Products → Add Product
#
# PRICING STRUCTURE:
# - Flat Fee: $19.99/month (all churches)
# - First 50 seats: FREE
# - Seats 51-75: $9.99/seat
# - Seats 76-200: $7.99/seat
# - Seats 201+: $5.99/seat

# BASE FEE: Fixed recurring price of $19.99/month
# - Create as: Recurring, Monthly, $19.99, Licensed
# - Usage: Quantity fixed at 1 (not adjustable)
STRIPE_PRICE_ID_BASE_FEE="price_..." # $19.99 flat fee (quantity always: 1)

# GROWTH TIER: Licensed price of $9.99 per seat (for seats 51-75)
# - Create as: Recurring, Monthly, $9.99, Licensed, Per-unit
# - Usage: Quantity adjustable (will be: seats - 50)
STRIPE_PRICE_ID_GROWTH="price_..." # $9.99/seat for seats 51-75

# THRIVE TIER: Licensed price of $7.99 per seat (for seats 76-200)
# - Create as: Recurring, Monthly, $7.99, Licensed, Per-unit
# - Usage: Quantity adjustable (will be: seats - 50)
STRIPE_PRICE_ID_THRIVE="price_..." # $7.99/seat for seats 76-200

# ENTERPRISE TIER: Licensed price of $5.99 per seat (for seats 201+)
# - Create as: Recurring, Monthly, $5.99, Licensed, Per-unit
# - Usage: Quantity adjustable (will be: seats - 50)
STRIPE_PRICE_ID_ENTERPRISE="price_..." # $5.99/seat for seats 201+

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Public URL for your application
# Used for redirects and webhook endpoints
NEXT_PUBLIC_APP_URL="http://localhost:3000" # Update for production

# ============================================================================
# PRICING EXAMPLES (For Reference Only)
# ============================================================================
# This is for documentation only - the actual prices are defined in Stripe
# and retrieved via the price IDs above
#
# Total Seats | Tier       | Paid Seats | Monthly Cost
# ------------|------------|------------|-------------
# 25          | Freemium   | 0          | $19.99
# 50          | Freemium   | 0          | $19.99
# 60          | Growth     | 10         | $119.89 ($19.99 + 10×$9.99)
# 75          | Growth     | 25         | $269.74 ($19.99 + 25×$9.99)
# 100         | Thrive     | 50         | $419.49 ($19.99 + 50×$7.99)
# 200         | Thrive     | 150        | $1,218.49 ($19.99 + 150×$7.99)
# 250         | Enterprise | 200        | $1,217.99 ($19.99 + 200×$5.99)

# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
#
# 1. Create Supabase Project:
#    - Go to https://supabase.com/dashboard
#    - Create a new project
#    - Get connection strings from Settings → Database
#    - Get API keys from Settings → API
#
# 2. URL-Encode Your Database Password:
#    - If password is: Leli@0320Pepp@
#    - Encoded version: Leli%400320Pepp%40
#    - Use an online URL encoder or JavaScript: encodeURIComponent(password)
#
# 3. Create Stripe Products (4 products required):
#    
#    A. BASE FEE ($19.99):
#       - Product name: "Church SaaS - Platform Fee"
#       - Recurring: Monthly
#       - Price: $19.99
#       - Usage type: Licensed
#       - Quantity: Fixed at 1
#    
#    B. GROWTH TIER ($9.99/seat):
#       - Product name: "Church SaaS - Growth Tier"
#       - Recurring: Monthly
#       - Price: $9.99
#       - Usage type: Licensed (per-seat)
#       - Quantity: Variable/Adjustable
#    
#    C. THRIVE TIER ($7.99/seat):
#       - Product name: "Church SaaS - Thrive Tier"
#       - Recurring: Monthly
#       - Price: $7.99
#       - Usage type: Licensed (per-seat)
#       - Quantity: Variable/Adjustable
#    
#    D. ENTERPRISE TIER ($5.99/seat):
#       - Product name: "Church SaaS - Enterprise Tier"
#       - Recurring: Monthly
#       - Price: $5.99
#       - Usage type: Licensed (per-seat)
#       - Quantity: Variable/Adjustable
#    
#    After creating each product, copy the Price ID (starts with price_...)
#
# 4. Setup Stripe Webhook:
#    - Go to Stripe Dashboard → Developers → Webhooks
#    - Add endpoint: https://your-domain.com/api/webhooks/stripe
#    - Select events to listen for:
#      * checkout.session.completed
#      * customer.subscription.created
#      * customer.subscription.updated
#      * customer.subscription.deleted
#      * invoice.paid
#      * invoice.payment_failed
#    - Copy the webhook signing secret
#
# 5. Local Development:
#    - Copy this file to .env.local
#    - Fill in all the values
#    - Never commit .env.local to version control
#
# 6. Production Deployment (Vercel):
#    - Add all environment variables in Vercel Dashboard
#    - Update NEXT_PUBLIC_APP_URL to your production domain
#    - Use production Stripe keys (pk_live_... and sk_live_...)
#    - Create a new webhook for production domain
#    - Ensure DATABASE_URL uses the connection pooler
#
# ============================================================================
# NOTES ON PRICING CHANGES
# ============================================================================
# If you're migrating from the old pricing model:
# 
# OLD VARIABLES (No longer used):
# - STRIPE_PRICE_ID_GROWTH_PLUS (was $15/seat)
# - STRIPE_PRICE_ID_THRIVE_PLUS (was $12/seat)
# - OLD ENTERPRISE (was $9/seat)
#
# NEW VARIABLES (Current):
# - STRIPE_PRICE_ID_BASE_FEE ($19.99 flat)
# - STRIPE_PRICE_ID_GROWTH ($9.99/seat for seats 51-75)
# - STRIPE_PRICE_ID_THRIVE ($7.99/seat for seats 76-200)
# - STRIPE_PRICE_ID_ENTERPRISE ($5.99/seat for seats 201+)
#
# Average Savings: ~33% across all tiers compared to old pricing!
# ============================================================================
